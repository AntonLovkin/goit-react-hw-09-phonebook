(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{20:function(e,t,r){"use strict";var n=r(16),c=r.n(n),a=r(23),s=r(18),o=r.n(s),u=r(3);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(u.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:n=t.sent,i(n.data.token),r(u.a.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(u.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(u.a.logoutRequest());try{o.a.post("/users/logout"),l(),t(u.a.logoutSuccess())}catch(r){t(u.a.logoutError(r.message))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(u.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:n=t.sent,i(n.data.token),r(u.a.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(u.a.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(a),t(u.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("users/current");case 8:s=e.sent,t(u.a.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(u.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}}},21:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return b})),r.d(t,"e",(function(){return j})),r.d(t,"d",(function(){return d}));var n=r(2),c=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),s=Object(n.b)("contacts/fetchContactsError"),o=Object(n.b)("contacts/addContactRequest"),u=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),l=Object(n.b)("contacts/deleteContactRequest"),b=Object(n.b)("contacts/deleteContactSuccess"),j=Object(n.b)("contacts/deleteContactError"),d=Object(n.b)("contacts/changeFilter")},3:function(e,t,r){"use strict";var n=r(2),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),s=Object(n.b)("auth/registerError"),o=Object(n.b)("auth/loginRequest"),u=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),l=Object(n.b)("auth/logoutRequest"),b=Object(n.b)("auth/logoutSuccess"),j=Object(n.b)("auth/logoutError"),d=Object(n.b)("auth/getCurrentUserRequest"),O=Object(n.b)("auth/getCurrentUserSuccess"),f=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:s,logoutRequest:l,logoutSuccess:b,logoutError:j,loginRequest:o,loginSuccess:u,loginError:i,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:f}},52:function(e,t,r){},83:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(26),s=r.n(a),o=(r(52),r(6)),u=r(9),i=r(15),l=r(1),b={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},j=function(){return Object(l.jsx)("nav",{children:Object(l.jsx)(i.b,{to:"/contacts",exact:!0,style:b.link,activeStyle:b.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})},d=function(e){return e.auth.isAuthenticated},O=function(e){return e.auth.user.email},f=r(20),g={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function h(){var e=Object(u.b)(),t=Object(n.useCallback)((function(){e(f.a.logOut())}),[e]),r=Object(u.c)(O);return Object(l.jsxs)("div",{style:g.container,children:[Object(l.jsxs)("span",{style:g.name,children:["Welcome, ",r]}),Object(l.jsx)("button",{type:"button",onClick:t,children:"Logout"})]})}var p={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},x=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/register",exact:!0,style:p.link,activeStyle:p.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsx)(i.b,{to:"/login",exact:!0,style:p.link,activeStyle:p.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},v={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function m(){var e=Object(u.c)(d);return Object(l.jsx)("header",{style:v.header,children:e?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsx)(h,{})]}):Object(l.jsx)(x,{})})}var y=r(10),k=r(27),C=["isAuthenticated","redirectTo","children"];function S(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(k.a)(e,C),c=Object(u.c)(d);return Object(l.jsx)(o.b,Object(y.a)(Object(y.a)({},n),{},{children:c?r:Object(l.jsx)(o.a,{to:t})}))}var E=["getIsAuthenticated","redirectTo","children"],w=function(e){e.getIsAuthenticated;var t=e.redirectTo,r=e.children,n=Object(k.a)(e,E),c=Object(u.c)(d);return Object(l.jsx)(o.b,Object(y.a)(Object(y.a)({},n),{},{children:c&&n.restricted?Object(l.jsx)(o.a,{to:t}):r}))},R=r(5),U=r(34),q={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function A(){var e=Object(u.b)(),t=Object(n.useState)({name:"",email:"",password:""}),r=Object(U.a)(t,2),c=r[0],a=r[1],s=function(e){var t=e.target,r=t.name,n=t.value;a((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(R.a)({},r,n))}))},o=c.name,i=c.email,b=c.password;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(l.jsxs)("form",{onSubmit:function(t){var r;t.preventDefault(),r=c,e(f.a.register(r)),a((function(e){return Object(y.a)(Object(y.a)({},e),{},{name:"",email:"",password:""})}))},style:q.form,autoComplete:"off",children:[Object(l.jsxs)("label",{style:q.label,children:["\u0418\u043c\u044f",Object(l.jsx)("input",{type:"text",name:"name",value:o,onChange:s})]}),Object(l.jsxs)("label",{style:q.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(l.jsx)("input",{type:"email",name:"email",value:i,onChange:s})]}),Object(l.jsxs)("label",{style:q.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(l.jsx)("input",{type:"password",name:"password",value:b,onChange:s})]}),Object(l.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var L=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,89))})),T=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,87))}));function F(){var e=Object(u.b)();return Object(n.useEffect)((function(){e(f.a.getCurrentUser())}),[e]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{}),Object(l.jsx)(n.Suspense,{fallback:Object(l.jsx)("p",{children:"Loading..."}),children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(w,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(l.jsx)(A,{})}),Object(l.jsx)(w,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(l.jsx)(T,{})}),Object(l.jsx)(S,{path:"/contacts",redirectTo:"/login",children:Object(l.jsx)(L,{})})]})})]})}var B,I,z,D,W,J=function(e){e&&e instanceof Function&&r.e(5).then(r.bind(null,88)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},P=r(29),M=r(2),G=r(45),H=r.n(G),K=r(17),N=r(46),Q=r.n(N),V=r(7),X=r(21),Y=Object(M.c)([],(B={},Object(R.a)(B,X.j,(function(e,t){return t.payload})),Object(R.a)(B,X.c,(function(e,t){var r=t.payload;if(!e.map((function(e){return e.name})).includes(r.name))return[r].concat(Object(P.a)(e));alert("".concat(r.name," is already in contacts"))})),Object(R.a)(B,X.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),B)),Z=Object(M.c)("",Object(R.a)({},X.d,(function(e,t){return t.payload}))),$=Object(M.c)(null,{}),_=Object(V.b)({items:Y,filter:Z,error:$}),ee=r(3),te={name:null,email:null},re=Object(M.c)(te,(I={},Object(R.a)(I,ee.a.registerSuccess,(function(e,t){return t.payload.user})),Object(R.a)(I,ee.a.loginSuccess,(function(e,t){return t.payload.user})),Object(R.a)(I,ee.a.logoutSuccess,(function(){return te})),Object(R.a)(I,ee.a.getCurrentUserSuccess,(function(e,t){return t.payload})),I)),ne=Object(M.c)(null,(z={},Object(R.a)(z,ee.a.registerSuccess,(function(e,t){return t.payload.token})),Object(R.a)(z,ee.a.loginSuccess,(function(e,t){return t.payload.token})),Object(R.a)(z,ee.a.logoutSuccess,(function(){return null})),z)),ce=function(e,t){return t.payload},ae=Object(M.c)(null,(D={},Object(R.a)(D,ee.a.registerError,ce),Object(R.a)(D,ee.a.loginError,ce),Object(R.a)(D,ee.a.logoutError,ce),Object(R.a)(D,ee.a.getCurrentUserError,ce),D)),se=Object(M.c)(!1,(W={},Object(R.a)(W,ee.a.registerSuccess,(function(){return!0})),Object(R.a)(W,ee.a.loginSuccess,(function(){return!0})),Object(R.a)(W,ee.a.getCurrentUserSuccess,(function(){return!0})),Object(R.a)(W,ee.a.registerError,(function(){return!1})),Object(R.a)(W,ee.a.loginError,(function(){return!1})),Object(R.a)(W,ee.a.getCurrentUserError,(function(){return!1})),Object(R.a)(W,ee.a.logoutSuccess,(function(){return!1})),W)),oe=Object(V.b)({user:re,isAuthenticated:se,token:ne,error:ae}),ue=[].concat(Object(P.a)(Object(M.d)({serializableCheck:{ignoredActions:[K.a,K.f,K.b,K.c,K.d,K.e]}})),[H.a]),ie={key:"auth",storage:Q.a,whitelist:["token"]},le=Object(M.a)({reducer:{auth:Object(K.g)(ie,oe),contacts:_},middleware:ue,devTools:!1}),be={store:le,persistor:Object(K.h)(le)},je=r(47);s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(u.a,{store:be.store,children:Object(l.jsx)(je.a,{loading:null,persistor:be.persistor,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(F,{})})})})}),document.getElementById("root")),J()}},[[83,1,2]]]);
//# sourceMappingURL=main.505be854.chunk.js.map